<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Ball and Rail Control: DoxygenFiles/taskbase.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 507 Ball and Rail Control
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">An RTOS environment was created to control a ball on a rotating beam by using a full state feedback control algorithm.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eeffde2e463314230abef71e178b21f2.html">DoxygenFiles</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">taskbase.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Headers for a class which implements tasks for task and state based programs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;<a class="el" href="hacks_8h_source.html">hacks.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="emstream_8h_source.html">emstream.h</a>&quot;</code><br />
</div>
<p><a href="taskbase_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_task_base.html">TaskBase</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base class for implementations of tasks in task/state based programs.  <a href="class_task_base.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7e56015e8db0788ac30b611936898d93"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#a7e56015e8db0788ac30b611936898d93">task_priority</a>(x)</td></tr>
<tr class="separator:a7e56015e8db0788ac30b611936898d93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af5d58b59190c51229146e8d6ca0915ac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classemstream.html">emstream</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#af5d58b59190c51229146e8d6ca0915ac">operator&lt;&lt;</a> (<a class="el" href="classemstream.html">emstream</a> &amp;, <a class="el" href="class_task_base.html">TaskBase</a> &amp;)</td></tr>
<tr class="separator:af5d58b59190c51229146e8d6ca0915ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f0d692cdfe28ec752321a16dbe8d7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#a95f0d692cdfe28ec752321a16dbe8d7f">print_task_list</a> (<a class="el" href="classemstream.html">emstream</a> *ser_dev)</td></tr>
<tr class="separator:a95f0d692cdfe28ec752321a16dbe8d7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa651c517ed031b06776e0312ac4556e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#aa651c517ed031b06776e0312ac4556e1">print_task_stacks</a> (<a class="el" href="classemstream.html">emstream</a> *ser_dev)</td></tr>
<tr class="separator:aa651c517ed031b06776e0312ac4556e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47f1dbd41b88d3adbe329027848ab38"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#ab47f1dbd41b88d3adbe329027848ab38">get_tick_time_float</a> (void)</td></tr>
<tr class="memdesc:ab47f1dbd41b88d3adbe329027848ab38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get time from the RTOS tick count, converted to seconds.  <a href="#ab47f1dbd41b88d3adbe329027848ab38">More...</a><br /></td></tr>
<tr class="separator:ab47f1dbd41b88d3adbe329027848ab38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_base.html">TaskBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8h.html#a8ab019e7b0c1b3203a3f62f590b4ff90">last_created_task_pointer</a></td></tr>
<tr class="memdesc:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the most recently created task.  <a href="#a8ab019e7b0c1b3203a3f62f590b4ff90">More...</a><br /></td></tr>
<tr class="separator:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Headers for a class which implements tasks for task and state based programs. </p>
<p>This file contains a wrapper class which makes the use of FreeRTOS threads a bit easier. It also adds a simple mechanism to support a finite state machine based construct within each task.</p>
<p>Revised: </p><ul>
<li>10-21-2012 JRR Original file </li>
<li>08-25-2012 JRR Modified to run with STM32's as well as AVR's </li>
<li>08-26-2014 JRR Changed file names and base task class name to <a class="el" href="class_task_base.html" title="Base class for implementations of tasks in task/state based programs. ">TaskBase</a> </li>
<li>09-03-2014 JRR Minor upgrades; renamed method to <code>delay_from_for()</code> </li>
</ul>
<p>Credits: Much of this code uses techniques learned from Amigo software, which is copyright 2012 by Digital Aggregates Corporation of Colorado, USA. The license used by Digital Aggregates is a modified version of the GNU Public License. See <a href="http://www.diag.com/navigation/downloads/Amigo.html">http://www.diag.com/navigation/downloads/Amigo.html</a>.</p>
<p>License: This file is copyright 2014 by JR Ridgely and released under the Lesser GNU Public License, version 2. It intended for educational use only, but its use is not limited thereto. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7e56015e8db0788ac30b611936898d93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e56015e8db0788ac30b611936898d93">&#9670;&nbsp;</a></span>task_priority</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_priority</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((x) &lt; (configMAX_PRIORITIES) ? \</div><div class="line">                ((tskIDLE_PRIORITY) + (x)) : (configMAX_PRIORITIES))</div></div><!-- fragment --><p>This macro is used to set the priority of a task. In addition to being a little more readable than the usual priority which is calculated from the idle task's priority, this macro checks to make sure that the asked for priority doesn't exceed the maximum priority set in <code><a class="el" href="_free_r_t_o_s_config_8h_source.html">FreeRTOSConfig.h</a></code>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab47f1dbd41b88d3adbe329027848ab38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47f1dbd41b88d3adbe329027848ab38">&#9670;&nbsp;</a></span>get_tick_time_float()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_tick_time_float </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get time from the RTOS tick count, converted to seconds. </p>
<p>This function returns the time since the RTOS was started up. The time is measured as a count of RTOS ticks since startup, divided by the rate of ticks per second, to give a floating point number holding time in seconds. </p>

</div>
</div>
<a id="af5d58b59190c51229146e8d6ca0915ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5d58b59190c51229146e8d6ca0915ac">&#9670;&nbsp;</a></span>operator&lt;&lt;()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classemstream.html">emstream</a>&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classemstream.html">emstream</a> &amp;&#160;</td>
          <td class="paramname"><em>ser_dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_base.html">TaskBase</a> &amp;&#160;</td>
          <td class="paramname"><em>a_task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This overloaded operator writes information about the task's status to the given serial device. That information can be used for debugging or perhaps reliability testing. Information written is: </p><ul>
<li>The task's name </li>
<li>The priority </li>
<li>The amount of stack used and total available <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser_dev</td><td>A reference to the serial device on which we're writing information </td></tr>
    <tr><td class="paramname">a_task</td><td>A reference to the task whose information is to be written </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A reference to the same serial device on which we write information. This is used to string together things to write with "&lt;&lt;" operators </dd></dl>
</li>
</ul>

</div>
</div>
<a id="a95f0d692cdfe28ec752321a16dbe8d7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f0d692cdfe28ec752321a16dbe8d7f">&#9670;&nbsp;</a></span>print_task_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_task_list </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classemstream.html">emstream</a> *&#160;</td>
          <td class="paramname"><em>ser_dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function prints information about how all the tasks are doing. Beginning with the most recently created task, each task prints its status and then asks the next task in the list to do the same until the end of the list is found. WARNING: The display of memory remaining in the task stacks, which is found by calls to FreeRTOS function uxTaskGetStackHighWaterMark(), seems to be suspicious. The author isn't sure if it can always be trusted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser_dev</td><td>Pointer to a serial device on which the information will be printed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa651c517ed031b06776e0312ac4556e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa651c517ed031b06776e0312ac4556e1">&#9670;&nbsp;</a></span>print_task_stacks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_task_stacks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classemstream.html">emstream</a> *&#160;</td>
          <td class="paramname"><em>ser_dev</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function has all the tasks in the task list do a "stack dump", printing their stacks in hex dump format. The idle task's stack is printed afterwards. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ser_dev</td><td>Pointer to a serial device on which the information will be printed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8ab019e7b0c1b3203a3f62f590b4ff90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ab019e7b0c1b3203a3f62f590b4ff90">&#9670;&nbsp;</a></span>last_created_task_pointer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_base.html">TaskBase</a>* last_created_task_pointer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A pointer to the most recently created task. </p>
<p>This static pointer to the most recently created task is used to find the beginning of a linked list of tasks. It's initially set to <code>NULL</code>, but each time a task is created, it's changed to point to the newly created task. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

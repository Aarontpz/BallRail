<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Ball and Rail Control: DoxygenFiles/taskbase.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 507 Ball and Rail Control
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">An RTOS environment was created to control a ball on a rotating beam by using a full state feedback control algorithm.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eeffde2e463314230abef71e178b21f2.html">DoxygenFiles</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">taskbase.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Source code for a class which implements tasks for task and state based programs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="taskbase_8h_source.html">taskbase.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abeff30a44eadf95fa24c7215cc6d7eae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8cpp.html#abeff30a44eadf95fa24c7215cc6d7eae">_call_static_run_method</a> (<a class="el" href="class_task_base.html">TaskBase</a> *p_task)</td></tr>
<tr class="memdesc:abeff30a44eadf95fa24c7215cc6d7eae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal use only function which calls the <code>run()</code> method.  <a href="#abeff30a44eadf95fa24c7215cc6d7eae">More...</a><br /></td></tr>
<tr class="separator:abeff30a44eadf95fa24c7215cc6d7eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47f1dbd41b88d3adbe329027848ab38"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8cpp.html#ab47f1dbd41b88d3adbe329027848ab38">get_tick_time_float</a> (void)</td></tr>
<tr class="memdesc:ab47f1dbd41b88d3adbe329027848ab38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get time from the RTOS tick count, converted to seconds.  <a href="#ab47f1dbd41b88d3adbe329027848ab38">More...</a><br /></td></tr>
<tr class="separator:ab47f1dbd41b88d3adbe329027848ab38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_base.html">TaskBase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="taskbase_8cpp.html#a8ab019e7b0c1b3203a3f62f590b4ff90">last_created_task_pointer</a> = NULL</td></tr>
<tr class="memdesc:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the most recently created task.  <a href="#a8ab019e7b0c1b3203a3f62f590b4ff90">More...</a><br /></td></tr>
<tr class="separator:a8ab019e7b0c1b3203a3f62f590b4ff90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Source code for a class which implements tasks for task and state based programs. </p>
<p>This file contains a wrapper class which makes the use of FreeRTOS threads a bit easier. It also adds a simple mechanism to support a finite state machine based construct within each task.</p>
<p>Revised: </p><ul>
<li>10-21-2012 JRR Original file </li>
<li>08-25-2012 JRR Modified to run with STM32's as well as AVR's </li>
<li>08-26-2014 JRR Changed file names and base task class name to <a class="el" href="class_task_base.html" title="Base class for implementations of tasks in task/state based programs. ">TaskBase</a></li>
</ul>
<p>Credits: This code uses techniques learned from Amigo software, which is copyright 2012 by Digital Aggregates Corporation of Colorado, USA. The license used by Digital Aggregates is a modified version of the GNU Public License; see <a href="http://www.diag.com/navigation/downloads/Amigo.html">http://www.diag.com/navigation/downloads/Amigo.html</a>.</p>
<p>License: This file is copyright 2014 by JR Ridgely and released under the Lesser GNU Public License, version 2. It intended for educational use only, but its use is not limited thereto. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abeff30a44eadf95fa24c7215cc6d7eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeff30a44eadf95fa24c7215cc6d7eae">&#9670;&nbsp;</a></span>_call_static_run_method()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void _call_static_run_method </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_task_base.html">TaskBase</a> *&#160;</td>
          <td class="paramname"><em>p_task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal use only function which calls the <code>run()</code> method. </p>
<p><b>This function never needs to be called by user-written code.</b> This is the task function which is called by the RTOS scheduler. It needs to call the task's run function which is a member of the user's task class, which is a descendent of class <code><a class="el" href="class_task_base.html" title="Base class for implementations of tasks in task/state based programs. ">TaskBase</a></code>. In order to call the user's run method, the RTOS run function must first call a static task method, <code>_call_users_run_method()</code>, which is also defined in class <code><a class="el" href="class_task_base.html" title="Base class for implementations of tasks in task/state based programs. ">TaskBase</a></code>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_task</td><td>A pointer to the task is given as a parameter to this task function; the pointer is used to find the task's static run method </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab47f1dbd41b88d3adbe329027848ab38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47f1dbd41b88d3adbe329027848ab38">&#9670;&nbsp;</a></span>get_tick_time_float()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_tick_time_float </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get time from the RTOS tick count, converted to seconds. </p>
<p>This function returns the time since the RTOS was started up. The time is measured as a count of RTOS ticks since startup, divided by the rate of ticks per second, to give a floating point number holding time in seconds. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a8ab019e7b0c1b3203a3f62f590b4ff90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ab019e7b0c1b3203a3f62f590b4ff90">&#9670;&nbsp;</a></span>last_created_task_pointer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_base.html">TaskBase</a>* last_created_task_pointer = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A pointer to the most recently created task. </p>
<p>This static pointer to the most recently created task is used to find the beginning of a linked list of tasks. It's initially set to <code>NULL</code>, but each time a task is created, it's changed to point to the newly created task. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

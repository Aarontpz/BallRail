<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Ball and Rail Control: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 507 Ball and Rail Control
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">An RTOS environment was created to control a ball on a rotating beam by using a full state feedback control algorithm.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ME 507 Ball and Rail Control Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Authors</dt><dd>Jason Grillo, Aaron Parisi, Trent Peterson</dd></dl>
<p>The Ball and Rail control project used the ME 405/507 library provided by John R. Ridgely from the Cal Poly Mechanical Engineering department. The project utilizes a Real Time Operating System (RTOS) to manage the critical timing of many tasks, each designed to execute specific functions simultaneously. The tasks communicate to each other with shared pointers. In short, the documentation includes content from the ME 405/507 library in addition to user source code that was written to implement the state space control algorithm for the Ball and Rail system.</p>
<h1><a class="anchor" id="ME"></a>
507 Library Information</h1>
<p>This documentation describes software designed for the ME405 class at Cal Poly. This software is intended to support the learning of embedded systems programming concepts by undergraduate engineering students. Although primarily intended for education, this software is fully functional in the sense that it can be used for programming projects of a complexity that is found in professional practice. No claim is made that this software is optimal for any such projects, however; see the licenses included for each file for information about the complete and total lack of any warranty associated with this product or any part thereof.</p>
<h1><a class="anchor" id="Usage"></a>
Usage</h1>
<p>This software has been developed on Ubuntu Linux sytems using entirely free (as in freedom of choice) development tools which are found in various Linux repositories. However, it can be run on other systems such as Microsoft<sup>TM</sup> Windows<sup>TM</sup>) computers, and students are encouraged to use whatever environment they prefer when doing development on their own machines.</p>
<p>Makefiles are supplied which automate development on the command line. These makefiles include support for building code projects, downloading to microcontrollers, and building documentation (such as this) using Doxygen. The makefiles and code have settings to support several different processors, and adding settings for more (and, in the case of some drivers, settings for specific target boards) is fairly easy. The user may also choose to work with this software using an integrated development environment such as Eclipse<sup>TM</sup>.</p>
<p>Downloading is usually done using common in-system programmers. A bootloader can be used; we don't prefer bootloaders for class use because we like to use our USB-serial interfaces (or wireless serial interfaces) for debugging and collecting test data from the microcontroller, and the need to switch between programming and debugging use of the serial port makes the test-debug cycle slower and less convenient than the use of separate programmer and debugger do. However, this code is entirely compatible with many bootloaders; this allows upgrading of remote systems from miles away, for example.</p>
<h1><a class="anchor" id="m_use"></a>
Components</h1>
<p>Several components are assembled in this software package. </p><ul>
<li>The FreeRTOS real-time operating system handles preemptive multitasking, scheduling, and inter-task communication. FreeRTOS has a home page at <code><a href="http://www.freertos.org">http://www.freertos.org</a></code>. </li>
<li>FreeRTOS is written in C, not C++, to ensure the widest possible portability. We greatly prefer C++, so a wrapper for FreeRTOS allows user programs to be written almost entirely in C++. The wrapper also extends the debugging support features in FreeRTOS somewhat. The wrapper code was inspired by the Amigo software, by Digital Aggregates Corporation (see <code><a href="http://www.diag.com/navigation/downloads/Amigo.html">http://www.diag.com/navigation/downloads/Amigo.html</a></code>). </li>
<li>This software supports using the finite state machine software style to organize one's programs. Designing programs using this high-level design technique is an important part of our mechatronics courses. </li>
<li>There is a class hierarchy to allow very convenient serial output to devices such as wired serial communication ports, radio modems, and SD cards. This library uses features similar to those in the the <code>iostream</code> classes of standard C++ (but a much smaller version for use on small microcontrollers). </li>
<li>A bunch of device drivers have been written to interface various sensors and communication devices.</li>
</ul>
<h1><a class="anchor" id="m_tarrrgh"></a>
Targets</h1>
<p>There are several circuit boards for which this software has been specifically targeted. </p><ul>
<li><b>ME405</b> <b>Boards</b> - These circuit boards are used in the ME405 and ME507 mechatronics courses at Cal Poly. They're designed for motion control and similar applications, thus a pair of high-power VNH series motor drivers from ST Microelectronics as well as various other accessories. </li>
<li><b>Swoop</b> <b>Boards</b> - These circuits are designed for mechanical measurements (the class, ME410, as well as the application in general). They can hold accelerometers and up to four strain gauge bridge amplifiers and interface with various other sensors. </li>
<li><b>PolyDAQ</b> <b>1</b> - This board was designed for the ME236 thermal measurements course at Cal Poly. It has two strain gauge bridges, two thermocouple amplifiers, and two general purpose single-ended voltage inputs. Because it is designed for a thermal measurements course, most measurements are taken at laughably slow speeds, but we'll probably find applications in which higher speeds can be used. </li>
<li><b>PolyDAQ</b> <b>2</b> - This upgraded version of the PolyDAQ uses an STM32F405 processor for much higher performance and supports four voltage input channels with a hardware adjustable gain and offset as well as two bridge amplifiers and two thermocouple amplifiers. </li>
<li><b>STM32F4</b> <b>Discovery</b> - The PolyDAQ 2 was based on this design. It has a STM32F407 with lots and lots of pins, runs really fast, and comes with an accelerometer and lots of blinky LED's. </li>
<li><b>STM32F4</b> <b>Nucleo</b> - This amazingly low-cost board comes with its own STLink2-1 programmer and USB-serial interface. Although not as powerful as a Discovery board, it's hardly a slacker, and its Arduino-compatible header may be handy for many projects. </li>
<li><b>Arduino</b> <b>Mega</b> - These have been used in some student projects. Their ATmega2560 processors are some of the most powerful in the AVR family and a real pain in the patootey to solder when they need fixing.</li>
</ul>
<h1><a class="anchor" id="m_sim"></a>
Similar Software</h1>
<p>A number of similar software products exist: </p><ul>
<li><b>Arduino</b> - The very popular embedded programming environment is similar to this software. However, whereas Arduino is intended to insulate the user from many of the dirt-in-your-fingernails basics of embedded programming, this software is intended to help students get their hands dirty and learn those same points. </li>
<li><b>DuinOS</b> - This is an extension of Arduino with FreeRTOS. </li>
<li><b>Amigo</b> - A C++ wrapper for FreeRTOS (see above), GPL licensed (thank you) so that its techniques and code could be used here. </li>
<li><b>More</b> - We're looking for more so that this list can be expanded.</li>
</ul>
<h1><a class="anchor" id="m_lic"></a>
Licenses</h1>
<p>The main code in this software package is released under the Lesser GNU Public License, version 2. Other components used with this software have their own licensing terms which can be found through links in the documentation for the files in question; all are free licenses. Some licenses do not restrict commercial use of this software, but most do place certain restrictions on commercial uses. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
